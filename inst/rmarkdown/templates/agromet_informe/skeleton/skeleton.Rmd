---
titulo: "Título"
subtitulo: "Subtítulo"
fecha: "`r Sys.Date()`"
volumen: 1
numero: 1
resumen: "Resumen muy resumido"
encabezado: "Instituto de Clima y Agua"
logo: "logo.png"
output: 
  agromet::agromet_informe:
    toc: true
    toc_depth: 3
    latex_engine: "xelatex"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE
)
library(agromet)    # Indices y Estadísticos Climáticos e Hidrológicos
library(tidyverse)  # Easily Install and Load the 'Tidyverse'
library(kableExtra)
```

## Evolución de as condiciones meteorológicas 

A continuación se muestra el uso de algunas funciones. Podés encontrar más ejemplos y usos de las funciones en [acá va el link a la viñeta]

Si se quieren utilizar los datos con formato NH se puede utilizar la función `leer_nh()` y opcionalmente acceder a sus metadatos con `metadatos_nh()`.

```{r lectura}
archivo <- system.file("extdata", "NH0358.DAT", package = "agromet")

datos <- leer_nh(archivo)
```


### Mapear 

```{r message=FALSE, warning=FALSE, out.width="45%", fig.align='center', fig.show="hold", fig.subcap=c("Temperatura máxima", "Temperatura mínima"), fig.cap = "Temperatura"}
# Genero datos aleatorios 
set.seed(934)
datos_aleatorios <- metadatos_nh() %>% 
  mutate(t_max = rnorm(n(), mean = (lat - min(lat)) + 10, sd = 10),
         t_min = rnorm(n(), mean = (lat - min(lat)), sd = 10))

datos_aleatorios %>% 
  with(mapear(t_max, lon, lat, cordillera = TRUE,
              escala = escala_temp_max,
              variable = "ºC",
              fuente = "Fuente: datos de ejemplo"))

datos_aleatorios %>% 
  with(mapear(t_min, lon, lat, cordillera = TRUE,
              escala = escala_temp_min,
              variable = "ºC", fuente = "Fuente: datos de ejemplo"))
```


La función `mapear()` grafica una variable dada en puntos discretos e irregulares (en general observaciones o datos derivados de estaciones meteorológicas) utilizando kriging. Se puede definir el título y epígrafe y opcionamente se puede incluir la cordillara para enmascarar la variable a graficar.



\begin{minipage}{.5\textwidth}
```{r}
datos_aleatorios %>% 
  slice_max(t_max, n = 10) %>% 
  select(nombre, t_max) %>% 
  kable_inta(caption = "Extremos de temperatura máxima",
             col.names = c("Ciudad", "Tempreatura Máxima (ºC)")) %>% 
  kable_styling(latex_options = "scale_down")
```
\end{minipage}
\begin{minipage}{.5\textwidth}
```{r}
datos_aleatorios %>% 
  slice_min(t_min, n = 10) %>% 
  select(nombre, t_min) %>% 
  kable_inta(col.names = c("Ciudad", "Tempreatura Mínima (ºC)"),
             caption = "Extremos de temperatura mínima") %>% 
  kable_styling(latex_options = "scale_down")
```
\end{minipage}


